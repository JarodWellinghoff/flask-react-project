# monitoring/grafana-dashboard.json
{
  "dashboard": {
    "title": "Calculation Service Dashboard",
    "panels": [
      {
        "title": "Calculations Started",
        "targets": [
          {
            "expr": "rate(calculation_started_total[5m])"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Active Calculations",
        "targets": [
          {
            "expr": "active_calculations"
          }
        ],
        "type": "stat"
      },
      {
        "title": "Calculation Duration",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(calculation_duration_seconds_bucket[5m]))"
          }
        ],
        "type": "graph"
      },
      {
        "title": "API Request Rate",
        "targets": [
          {
            "expr": "sum(rate(api_request_total[5m])) by (endpoint)"
          }
        ],
        "type": "graph"
      },
      {
        "title": "API Response Time",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(api_request_duration_seconds_bucket[5m]))"
          }
        ],
        "type": "graph"
      },
      {
        "title": "SSE Connections",
        "targets": [
          {
            "expr": "sse_connections_active"
          }
        ],
        "type": "stat"
      },
      {
        "title": "Error Rate",
        "targets": [
          {
            "expr": "rate(api_request_total{status=~\"5..\"}[5m])"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Redis Operations",
        "targets": [
          {
            "expr": "rate(redis_operations_total[5m])"
          }
        ],
        "type": "graph"
      }
    ]
  }
}